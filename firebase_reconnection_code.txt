// Add this to the end of the file before </script> tag:

// Automatic Firebase reconnection system
window.setupAutomaticFirebaseReconnection = function() {
  let checkAttempts = 0;
  const maxChecks = 15;
  
  const checkAndReconnect = () => {
    if (window.db && window.app) {
      if (window.app.dataService && !window.app.dataService.db) {
        window.app.dataService.db = window.db;
        console.log('✅ DataService automatically reconnected to Firebase');
      }
      if (window.app.archiveService && window.app.archiveService.dataService && !window.app.archiveService.dataService.db) {
        window.app.archiveService.dataService.db = window.db;
        console.log('✅ ArchiveService automatically reconnected to Firebase');
      }
      console.log('✅ All services reconnected to Firebase automatically');
      return;
    }
    checkAttempts++;
    if (checkAttempts < maxChecks) {
      setTimeout(checkAndReconnect, 2000);
    }
  };
  setTimeout(checkAndReconnect, 2000);
};

// Start automatic reconnection
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', window.setupAutomaticFirebaseReconnection);
} else {
  window.setupAutomaticFirebaseReconnection();
}
